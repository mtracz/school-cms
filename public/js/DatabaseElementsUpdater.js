function DatabaseElementsUpdater(){var e=this;this.elementsUpdateURL=window.location.origin+"/element/manage/update",this.elementsToUpdate=[],this.ajaxData={data:[]},this.sendToUpdate=function(){e.ajaxData.data=e.elementsToUpdate,e.sendAjax(e.ajaxData),e.elementsToUpdate=[],e.ajaxData.data=[]},this.sendAjax=function(t){e.sendElementsUpdatePromise({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:e.elementsUpdateURL,data:t,method:"POST"}).then(function(e){toastr.success("<h3>Zapisano zmiany!</h3>"),console.log("sendElementsUpdatePromise: success")}).catch(function(e){toastr.error("<h3>Próba zmiany nie powiodła się!</h3>"),console.log("sendElementsUpdatePromise: fail",e)})},this.sendElementsUpdatePromise=function(e){return new Promise(function(t,n){$.ajax(e).done(t).fail(n)})},this.addElement=function(t,n,a,s){var o=new Element(parseInt(t),parseInt(n),parseInt(a),parseInt(s));e.checkIfExists(o)?e.updateElement(o):e.elementsToUpdate.push(o)},this.updateElement=function(t){console.log("updateElement");for(var n=void 0,a=0;a<e.elementsToUpdate.length;a++)e.elementsToUpdate[a].id==t.id&&(n=a);e.elementsToUpdate[n].sector_id=t.sector_id,e.elementsToUpdate[n].order=t.order,e.elementsToUpdate[n].is_enabled=t.is_enabled,console.log(e.elementsToUpdate[n])},this.checkIfExists=function(t){if(e.elementsToUpdate.length>0)for(var n=0;n<e.elementsToUpdate.length;n++)if(e.elementsToUpdate[n].id===t.id)return!0;return!1}}function Element(e,t,n,a){this.id=e,this.sector_id=t,this.order=n,this.is_enabled=a}